"use strict";(self.webpackChunkmithril_doc=self.webpackChunkmithril_doc||[]).push([[649],{3905:(e,t,r)=>{r.d(t,{Zo:()=>h,kt:()=>u});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),s=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},h=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),p=s(r),m=n,u=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return r?a.createElement(u,o(o({ref:t},h),{},{components:r})):a.createElement(u,o({ref:t},h))}));function u(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[p]="string"==typeof e?e:n,o[1]=c;for(var s=2;s<i;s++)o[s]=r[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},64630:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>s});var a=r(87462),n=(r(67294),r(3905));const i={title:"Mithril Era Switch",authors:[{name:"Mithril Team"}],tags:["era","era activation","era markers","era switch","hard fork"]},o=void 0,c={permalink:"/doc/dev-blog/2023/03/02/era-switch-feature",source:"@site/blog/2023-03-02-era-switch-feature/index.md",title:"Mithril Era Switch",description:"Update 2023/03/10: The Era Switch behavior has been activated on the release-preprod network.",date:"2023-03-02T00:00:00.000Z",formattedDate:"March 2, 2023",tags:[{label:"era",permalink:"/doc/dev-blog/tags/era"},{label:"era activation",permalink:"/doc/dev-blog/tags/era-activation"},{label:"era markers",permalink:"/doc/dev-blog/tags/era-markers"},{label:"era switch",permalink:"/doc/dev-blog/tags/era-switch"},{label:"hard fork",permalink:"/doc/dev-blog/tags/hard-fork"}],readingTime:1.75,hasTruncateMarker:!1,authors:[{name:"Mithril Team"}],frontMatter:{title:"Mithril Era Switch",authors:[{name:"Mithril Team"}],tags:["era","era activation","era markers","era switch","hard fork"]},prevItem:{title:"Mithril client has got a brand new interface",permalink:"/doc/dev-blog/2023/06/14/new-client-interface"},nextItem:{title:"Mithril Release Process",permalink:"/doc/dev-blog/2022/12/05/release-process"}},l={authorsImageUrls:[void 0]},s=[{value:"An new Era Switch behavior will be introduced soon to the Mithril networks",id:"an-new-era-switch-behavior-will-be-introduced-soon-to-the-mithril-networks",level:3}],h={toc:s},p="wrapper";function d(e){let{components:t,...i}=e;return(0,n.kt)(p,(0,a.Z)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Update 2023/03/10"),": The Era Switch behavior has been activated on the ",(0,n.kt)("inlineCode",{parentName:"p"},"release-preprod")," network."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Update 2023/03/08"),": The Era Switch behavior has been activated on the ",(0,n.kt)("inlineCode",{parentName:"p"},"pre-release-preview")," network."),(0,n.kt)("h3",{id:"an-new-era-switch-behavior-will-be-introduced-soon-to-the-mithril-networks"},"An new Era Switch behavior will be introduced soon to the Mithril networks"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Epic"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"Implement eras behavior switch #707](Implement eras behavior switch")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/mithril/issues/707"},"#707")),(0,n.kt)("p",null,"\u26a0\ufe0f The Era Switch is not deployed yet to the ",(0,n.kt)("inlineCode",{parentName:"p"},"pre-release-preview")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"release-preprod")," network. A special announcement will be made on the ",(0,n.kt)("strong",{parentName:"p"},"moria")," Discord channel when a new release candidate distribution is ready."),(0,n.kt)("p",null,"In order to guarantee that any breaking change of the Mithril nodes does not break the Certificate Chain and the that new snapshots are consistently produced, the Mithril team has developped an Era Switch Behavior. This mechanism enables to embed new features in the signer and aggregator nodes prior ro releasing them. Also the activation of these new features will take place in a coordinated manner: all the eligible nodes will hot switch to a new era at the same Cardano epoch transition. To do so, the nodes rely on a transaction that is stored on the Cardano chain that provides era markers with the associated activations epochs for the eras."),(0,n.kt)("p",null,"\ud83d\udd25 Activating this feature will require an update of configuration of the signer nodes after updating their binary:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The ",(0,n.kt)("inlineCode",{parentName:"li"},"ERA_READER_ADAPTER_TYPE")," env var must be set to ",(0,n.kt)("inlineCode",{parentName:"li"},"cardano-chain")),(0,n.kt)("li",{parentName:"ul"},"The ",(0,n.kt)("inlineCode",{parentName:"li"},"ERA_READER_ADAPTER_PARAMS")," env var must be set to the result of the command ",(0,n.kt)("inlineCode",{parentName:"li"},'jq -nc --arg address $(wget -q -O - **YOUR_ERA_READER_ADDRESS**) --arg verification_key $(wget -q -O - **YOUR_ERA_READER_VERIFICATION_KEY**) \'{"address": $address, "verification_key": $verification_key}\'')," (the *",(0,n.kt)("strong",{parentName:"li"},"*YOUR_ERA_READER_ADDRESS**")," and *",(0,n.kt)("strong",{parentName:"li"},"*YOUR_ERA_READER_VERIFICATION_KEY**")," are values provided in the networks configuration matrix)")),(0,n.kt)("p",null,"Here is the configuration values that should be used on ",(0,n.kt)("inlineCode",{parentName:"p"},"pre-release-preview"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'ERA_READER_ADAPTER_TYPE=cardano-chain\nERA_READER_ADAPTER_PARAMS={"address":"addr_test1qrv5xfwh043mlc3vk5d97s4nmhxu7cmleyssvhx37gkfyejfe8d38v3vsfgetjafgrsdc49krug8wf04h5rmtengtejqlxrksk","verification_key":"5b35352c3232382c3134342c38372c3133382c3133362c34382c382c31342c3138372c38352c3134382c39372c3233322c3235352c3232392c33382c3234342c3234372c3230342c3139382c31332c33312c3232322c32352c3136342c35322c3130322c39312c3132302c3230382c3134375d"}\n')),(0,n.kt)("p",null,"Here is the configuration values that should be used on ",(0,n.kt)("inlineCode",{parentName:"p"},"release-preprod"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'ERA_READER_ADAPTER_TYPE=cardano-chain\nERA_READER_ADAPTER_PARAMS={"address":"addr_test1qpkyv2ws0deszm67t840sdnruqgr492n80g3y96xw3p2ksk6suj5musy6w8lsg3yjd09cnpgctc2qh386rtxphxt248qr0npnx","verification_key":"5b35352c3232382c3134342c38372c3133382c3133362c34382c382c31342c3138372c38352c3134382c39372c3233322c3235352c3232392c33382c3234342c3234372c3230342c3139382c31332c33312c3232322c32352c3136342c35322c3130322c39312c3132302c3230382c3134375d"}\n')),(0,n.kt)("p",null,"All these information will be available at the updated ",(0,n.kt)("a",{parentName:"p",href:"https://mithril.network/doc/manual/getting-started/run-signer-node"},(0,n.kt)("inlineCode",{parentName:"a"},"Run a Mithril Signer node (SPO)"))," guide."),(0,n.kt)("p",null,"Here is a schema that illustrates the era switch behavior:\n",(0,n.kt)("a",{target:"_blank",href:r(57801).Z},(0,n.kt)("img",{alt:"Era Switch Schema",src:r(86237).Z,width:"1537",height:"650"}))),(0,n.kt)("p",null,"More information is also available at this ",(0,n.kt)("a",{parentName:"p",href:"https://mithril.network/doc/adr/4"},"ADR"),"."),(0,n.kt)("p",null,"Feel free to reach out to us on the ",(0,n.kt)("a",{parentName:"p",href:"https://discord.gg/5kaErDKDRq"},"Discord channel")," for questions and/or help."))}d.isMDXComponent=!0},57801:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/files/schema-44673422940a92bbe82f4db8598c5e45.jpg"},86237:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/schema-44673422940a92bbe82f4db8598c5e45.jpg"}}]);