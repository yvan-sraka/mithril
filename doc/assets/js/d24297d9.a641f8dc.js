"use strict";(self.webpackChunkmithril_doc=self.webpackChunkmithril_doc||[]).push([[3232],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>h});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(r),u=a,h=m["".concat(s,".").concat(u)]||m[u]||c[u]||i;return r?n.createElement(h,l(l({ref:t},d),{},{components:r})):n.createElement(h,l({ref:t},d))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},431:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const i={title:"Mithril Release Process",authors:[{name:"Mithril Team"}],tags:["process"]},l=void 0,o={permalink:"/doc/dev-blog/2022/12/05/release-process",source:"@site/blog/2022-12-05-release-process/index.md",title:"Mithril Release Process",description:"Mithril follows a defined release process",date:"2022-12-05T00:00:00.000Z",formattedDate:"December 5, 2022",tags:[{label:"process",permalink:"/doc/dev-blog/tags/process"}],readingTime:3.54,hasTruncateMarker:!1,authors:[{name:"Mithril Team"}],frontMatter:{title:"Mithril Release Process",authors:[{name:"Mithril Team"}],tags:["process"]},nextItem:{title:"Mithril environments are updated",permalink:"/doc/dev-blog/2022/10/28/updated-environments"}},s={authorsImageUrls:[void 0]},p=[{value:"Mithril follows a defined release process",id:"mithril-follows-a-defined-release-process",level:3},{value:"Release Process",id:"release-process",level:3},{value:"Networks",id:"networks",level:3},{value:"Further Reading",id:"further-reading",level:3}],d={toc:p};function m(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"mithril-follows-a-defined-release-process"},"Mithril follows a defined release process"),(0,a.kt)("p",null,"As the Mithril project grew and more and more SPOs became involved in testing Mithril, it became obvious we need clearer identification of artifacts running on various parts of the network. Moreover, on our road towards mainnet availability we'll need to strengthen our testing process in order to validate Mithril network on more realistic environments."),(0,a.kt)("h3",{id:"release-process"},"Release Process"),(0,a.kt)("p",null,"We want our release process to follow some basic principles:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"Continuous Integration"),": New code is integrated into the ",(0,a.kt)("inlineCode",{parentName:"li"},"main")," codeline frequently which triggers automated build and test process."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"Continuous Deployment"),": New artifacts produced by the build process are continuously deployed to a suitable ",(0,a.kt)("em",{parentName:"li"},"environment")," where it can be used and tested by an increasing number of parties."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"Deployment Pipeline"),": The deployment process is embodied in a ",(0,a.kt)("em",{parentName:"li"},"pipeline")," that describes and implements all the necessary steps to release a new version of Mithril."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"Artifact Promotion"),": An artifact is built ",(0,a.kt)("em",{parentName:"li"},"once and only once")," and is ",(0,a.kt)("em",{parentName:"li"},"promoted")," while travelling through the build pipeline.")),(0,a.kt)("p",null,"Here is a high-level picture of this process:"),(0,a.kt)("p",null,(0,a.kt)("a",{target:"_blank",href:r(9861).Z},(0,a.kt)("img",{alt:"Release Process",src:r(892).Z,width:"1220",height:"819"}))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"We will use a custom version based on ",(0,a.kt)("a",{parentName:"li",href:"https://semver.org"},"SemVer")," for all the crates, binaries and containers of the repository and for the GitHub release."),(0,a.kt)("li",{parentName:"ul"},"We release a new distribution every 2 weeks (this duration is subject to changes as the project matures)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"The released version is named after the year and its week number: ",(0,a.kt)("strong",{parentName:"li"},"YYWW.patch")," (e.g. ",(0,a.kt)("inlineCode",{parentName:"li"},"2250.0"),")."),(0,a.kt)("li",{parentName:"ul"},'In case of critical regressions happening in production, a patch version will be released in between "official" releases as a hotfix.'))),(0,a.kt)("li",{parentName:"ul"},"A new version ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0")," will have the following life cycle:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"A commit ",(0,a.kt)("inlineCode",{parentName:"li"},"abc123")," merged on ",(0,a.kt)("inlineCode",{parentName:"li"},"main")," branch is deployed on the network named ",(0,a.kt)("inlineCode",{parentName:"li"},"testing-preview"),"."),(0,a.kt)("li",{parentName:"ul"},"A commit ",(0,a.kt)("inlineCode",{parentName:"li"},"def456")," tagged with ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0-prerelease")," is deployed on the network named ",(0,a.kt)("inlineCode",{parentName:"li"},"pre-release-preview"),"."),(0,a.kt)("li",{parentName:"ul"},"A GitHub release ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0-prerelease")," is created and linked with the ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0-prerelease")," tag and marked as ",(0,a.kt)("inlineCode",{parentName:"li"},"pre-release"),"."),(0,a.kt)("li",{parentName:"ul"},"A tag ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0-prerelease")," is qualified and selected for release or rejected (and replaced by a ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.1-prerelease")," tag if necessary on a ",(0,a.kt)("inlineCode",{parentName:"li"},"fed789"),")."),(0,a.kt)("li",{parentName:"ul"},"If the tag ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0-prerelease")," is selected, a new tag is created and name ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0")," on the same commit ",(0,a.kt)("inlineCode",{parentName:"li"},"def456"),"."),(0,a.kt)("li",{parentName:"ul"},"A GitHub release ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0")," is created and linked to the ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0")," tag and marked as ",(0,a.kt)("inlineCode",{parentName:"li"},"release"),"."),(0,a.kt)("li",{parentName:"ul"},"The commit ",(0,a.kt)("inlineCode",{parentName:"li"},"def456")," with tag ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0")," is deployed to the network named ",(0,a.kt)("inlineCode",{parentName:"li"},"release-preprod"),"."))),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"Cargo.toml")," versions of the crates are updated (if required) just before creating the ",(0,a.kt)("inlineCode",{parentName:"li"},"YYWW.0-prerelease")," tag ."),(0,a.kt)("li",{parentName:"ul"},"The documentation website is also updated at the same time where the ",(0,a.kt)("inlineCode",{parentName:"li"},"next")," version becomes the ",(0,a.kt)("inlineCode",{parentName:"li"},"current")," version, leaving future updates be appended to the ",(0,a.kt)("inlineCode",{parentName:"li"},"next")," version during the upcoming developments."),(0,a.kt)("li",{parentName:"ul"},"In order to simplify the life of Mithril users, we have introduced a version of the ",(0,a.kt)("inlineCode",{parentName:"li"},"Mithril API")," used between client/signer and aggregators to check if the nodes are able to communicate together (following semver and considering the versions are compatible only if they share the same minor)."),(0,a.kt)("li",{parentName:"ul"},"Our main distribution artefact is currently docker (OCI) images. We also provide more packages, eg. ",(0,a.kt)("inlineCode",{parentName:"li"},".deb")," packages or compiled binaries (some of them available on multiple platforms, e.g. Windows or macOS) to simplify users' life."),(0,a.kt)("li",{parentName:"ul"},"We also publish some of our crates on the ",(0,a.kt)("inlineCode",{parentName:"li"},"crates.io")," registry whenever a new version is created (e.g. ",(0,a.kt)("a",{parentName:"li",href:"https://crates.io/crates/mithril-stm"},(0,a.kt)("inlineCode",{parentName:"a"},"mithril-stm")),").")),(0,a.kt)("h3",{id:"networks"},"Networks"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"We maintain different Mithril networks (eg. servers, VMs, configurations...) to which artifacts are deployed at various stages of the process:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"testing-preview"),": This is an internal environment based on the ",(0,a.kt)("inlineCode",{parentName:"li"},"preview")," cardano testnet where most of the automated tests happen. It is also used to test features as soon as they are merged on the ",(0,a.kt)("inlineCode",{parentName:"li"},"main")," branch."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"pre-release-preview"),": This is a persistent environment based on the ",(0,a.kt)("inlineCode",{parentName:"li"},"preview")," cardano testnet. SPOs which are active on preview are welcomed to take part in the Mithril signing process and to test new ",(0,a.kt)("inlineCode",{parentName:"li"},"pre-release")," distributions deployed there."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"release-preprod"),": Another persistent environment, based on the ",(0,a.kt)("inlineCode",{parentName:"li"},"preprod")," cardano testnet, where more SPOs are expected to join and test, updated less frequently (on actual ",(0,a.kt)("inlineCode",{parentName:"li"},"release")," distributions)."),(0,a.kt)("li",{parentName:"ul"},"(",(0,a.kt)("em",{parentName:"li"},"LATER"),") ",(0,a.kt)("inlineCode",{parentName:"li"},"mainnet"),": Production environment where new releases are deployed once qualifed on ",(0,a.kt)("inlineCode",{parentName:"li"},"release-preprod"),".")))),(0,a.kt)("h3",{id:"further-reading"},"Further Reading"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The Mithril developers have redacted an ADR ",(0,a.kt)("a",{parentName:"li",href:"https://mithril.network/doc/adr/3/"},"Release process and versioning")," that also describes more technically this process.")))}m.isMDXComponent=!0},9861:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/release_process-a9ce55af510cd542b71e68a485251004.jpg"},892:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/release_process-a9ce55af510cd542b71e68a485251004.jpg"}}]);